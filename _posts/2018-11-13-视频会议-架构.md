---
layout: post
title: 视频会议架构
comments: true
category: 视频会议
tags: 视频会议基础
---
    
# 视频会议架构演进
早期视频会议进入市场时，是以h323为基础的视频会议架构，以Mcu为核心处理单元，
这一阶段的架构核心强调Mcu的重要性，
随着internet的新起，个人需求催生了webrtc，也催生了一种SFU的视频会议架构
本文聊一聊两种架构的差异
    
<!--more-->
    
# Mcu（Multi-point Control Unit）
![Mcu](https://github.com/neland/blogfile/raw/master/image/mcu.png)

此模型是一个中心集权式方案，由中心点处理视频会议的各种问题
1.协议转换（sip/h323/电话/webrtc）
2.码流转换（分辨率/帧率/格式转换）
3.图像合成

此模型的优缺点

* 优点
	- 节约终端带宽
	- 减少终端性能消耗
* 缺点
	- 平台过于复杂
	- 平台会使用大量资源
* 适用场景
	- 政府、军队
	- 带宽、局端有限制的场景

此模型的优点其实算是解决终端的缺点，这也是有历史原因的，在视频会议才出来的时候，硬件和网络都有瓶颈
但随着科技的发展，缺点也可能不再是缺点

# SFU（Selective Forwarding Unit）
![SFU](https://github.com/neland/blogfile/raw/master/image/sfu.png)

此模型下，SFU只负责转发（偶尔负责转码），终端在这里承担了主要角色
1.多码流发送（在编码的时候就发送多路质量不一样的码流，来应对视频会议中的不同能力的对端）
2.图像合成

此模型的优缺点

* 优点
	- 少量的平台资源占用
	- 灵活的逻辑处理
* 缺点
	- 终端性能、带宽要求较高
	- 终端业务逻辑复杂
* 适用场景
	- 大量web、手持个人用户
	- 基于云平台的视频会议平台方案

随着时代发展，视频会议的参会方式更加灵活，一个移动设备就能随时随地参会。
并且现在的终端也越来越强劲，可以做更多平台做的功能
一旦平台突破了媒体的约束，就可以大量接入终端

* 关于多流的实现

	SFU模型用到的多路码流发送方案，有两种实现方式。
    一种是在Sip协议基础上协商多路码流发送
    另外一种是基于H264的[SVC](https://www.cnblogs.com/huxiaopeng/p/5653310.html)，此方案是只发送一路码流，但是在单帧图像里面包含多种不同格式图像信息


